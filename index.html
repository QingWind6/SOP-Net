<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>test</title>
</head>
<body>
    <h1>swoole_webserver测试</h1>
    <script type="text/javascript" src="./script.js">

    </script>
    
   <script src="https://togetherjs.com/togetherjs-min.js"></script>

<div>
	<button id="intercomBegin">开始对讲</button>
	<button id="intercomEnd">关闭对讲</button>
</div>

<!-- togetherjs内容 -->
 <div>
    <button id="start-togetherjs" type="button"
    onclick="TogetherJS(this); 
    return false">Start TogetherJS</button>
 </div>

</body>
<script>
// 服务器调试
var wsServer = 'ws://sw.dabaicai.ink:9502';
        var websocket = new WebSocket(wsServer);
        websocket.onopen = function (evt) {
            websocket.send("hello xiaohui");
            console.log("Connected -swoole-success");
        };

        websocket.onclose = function (evt) {
            console.log("Disconnected");
        };

        websocket.onmessage = function (evt) {
            console.log('ws-server-return-data: ' + evt.data);
        };

        websocket.onerror = function (evt, e) {
            console.log('Error occured: ' + evt.data);
        };

//
// var begin = document.getElementById('intercomBegin');
// var end = document.getElementById('intercomEnd');
// navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;
// var ws = null;//实现WebSocket 
// var record=null;//多媒体对象，用来处理音频
// var timeInte = null;//定义一个定时器
// begin.onclick = function() {
// 	console.log('开始对讲')
// }
// end.onclick = function() {
// 	console.log('关闭对讲')
//     if(ws) {
//         ws.close();
// 		record.stop();
// 		clearInterval(timeInte);
//     }
// }

